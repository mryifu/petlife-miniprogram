// cloudfunctions/initKnowledge/index.js
const cloud = require('wx-server-sdk')

cloud.init({ env: cloud.DYNAMIC_CURRENT_ENV })

const db = cloud.database()

const SAMPLE_DATA = [
    {
        title: "æ–°æ‰‹å…»çŒ«å¿…å¤‡ç‰©å“æ¸…å•",
        category: "supplies",
        content: "è¿ŽæŽ¥å°çŒ«å›žå®¶ï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿ\n\n1. **é¥®é£Ÿç±»**ï¼šå¹¼çŒ«ç²®ã€ä¸»é£Ÿç½å¤´ã€é™¶ç“·æˆ–ä¸é”ˆé’¢é£Ÿç›†/æ°´ç¢—ï¼ˆé¿å…é»‘ä¸‹å·´ï¼‰ã€‚\n2. **å¦‚åŽ•ç±»**ï¼šçŒ«ç ‚ç›†ï¼ˆå»ºè®®æ•žå¼€å¼ï¼‰ã€çŒ«ç ‚ï¼ˆè±†è…ç ‚æˆ–è†¨æ¶¦åœŸï¼‰ã€çŒ«ç ‚é“²ã€‚\n3. **å‡ºè¡Œç±»**ï¼šèˆªç©ºç®±æˆ–çŒ«åŒ…ï¼ˆé€æ°”æ€§è¦å¥½ï¼‰ã€‚\n4. **æ¸…æ´ç±»**ï¼šå® ç‰©ä¸“ç”¨æ²æµ´éœ²ï¼ˆä¸è¦ç”¨äººçš„ï¼ï¼‰ã€æŒ‡ç”²å‰ªã€æ¢³å­ã€‚\n5. **çŽ©å…·ç±»**ï¼šé€—çŒ«æ£’ã€çŒ«æŠ“æ¿ï¼ˆä¿æŠ¤æ²™å‘å¿…å¤‡ï¼‰ã€‚\n\nå‡†å¤‡å¥½è¿™äº›ï¼Œå°±å¯ä»¥å®‰å¿ƒæŽ¥ä¸»å­å›žå®¶å•¦ï¼ðŸ ",
        summary: "è¿ŽæŽ¥å°çŒ«å›žå®¶ï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿé¥®é£Ÿã€å¦‚åŽ•ã€å‡ºè¡Œã€æ¸…æ´ã€çŽ©å…·å…¨æ–¹ä½æ¸…å•ã€‚",
        coverImage: "cloud://cloud1-9gy2up9ea2d61a0e.636c-cloud1-9gy2up9ea2d61a0e-1309873919/sample/cat-supplies.jpg"
    },
    {
        title: "ç‹—ç‹—è™½ç„¶è´ªåƒï¼Œä½†è¿™5ç§é£Ÿç‰©åƒä¸‡ä¸èƒ½å–‚ï¼",
        category: "feeding",
        content: "ç‹—ç‹—æ˜¯æ‚é£ŸåŠ¨ç‰©ï¼Œä½†ä¸æ˜¯ä»€ä¹ˆéƒ½èƒ½åƒå“¦ï¼ðŸš«\n\n1. **å·§å…‹åŠ›**ï¼šå«æœ‰å¯å¯ç¢±ï¼Œå¯¹ç‹—ç‹—å¿ƒè„å’Œç¥žç»ç³»ç»Ÿæœ‰å‰§æ¯’ã€‚\n2. **è‘¡è„/è‘¡è„å¹²**ï¼šå¯èƒ½å¯¼è‡´æ€¥æ€§è‚¾è¡°ç«­ã€‚\n3. **æ´‹è‘±/å¤§è‘±**ï¼šç ´åçº¢ç»†èƒžï¼Œå¯¼è‡´è´«è¡€ã€‚\n4. **æœ¨ç³–é†‡**ï¼šå¸¸è§äºŽæ— ç³–å£é¦™ç³–ï¼Œä¼šå¯¼è‡´èƒ°å²›ç´ æ¿€å¢žå’Œè‚è¡°ç«­ã€‚\n5. **ç†Ÿç¦½éª¨**ï¼šç…®ç†Ÿçš„é¸¡éª¨å¤´å®¹æ˜“åˆºç ´é£Ÿé“æˆ–è‚ èƒƒã€‚\n\nçˆ±å®ƒï¼Œå°±è¦ç®¡ä½å®ƒçš„å˜´ï¼ðŸ¶",
        summary: "å·§å…‹åŠ›ã€è‘¡è„ã€æ´‹è‘±...è¿™äº›å¸¸è§é£Ÿç‰©å¯¹ç‹—ç‹—æ¥è¯´å¯èƒ½æ˜¯è‡´å‘½æ¯’è¯ï¼",
        coverImage: "cloud://cloud1-9gy2up9ea2d61a0e.636c-cloud1-9gy2up9ea2d61a0e-1309873919/sample/dog-food-warning.jpg"
    },
    {
        title: "çŒ«å’ªæ¢ç²®çš„æ­£ç¡®å§¿åŠ¿ï¼š7æ—¥æ¢ç²®æ³•",
        category: "feeding",
        content: "çªç„¶æ¢ç²®å®¹æ˜“å¼•èµ·çŒ«å’ªè½¯ä¾¿æˆ–å‘•åï¼Œç§‘å­¦æ¢ç²®åªéœ€7å¤©ï¼š\n\n- **ç¬¬1-2å¤©**ï¼š25%æ–°ç²® + 75%æ—§ç²®\n- **ç¬¬3-4å¤©**ï¼š50%æ–°ç²® + 50%æ—§ç²®\n- **ç¬¬5-6å¤©**ï¼š75%æ–°ç²® + 25%æ—§ç²®\n- **ç¬¬7å¤©**ï¼š100%æ–°ç²®\n\nè§‚å¯Ÿä¾¿ä¾¿æƒ…å†µï¼Œå¦‚æžœè½¯ä¾¿ï¼Œé€€å›žåˆ°ä¸Šä¸€é˜¶æ®µå¤šé€‚åº”å‡ å¤©ã€‚å¾ªåºæ¸è¿›ï¼Œè‚ èƒƒæ›´å¥åº·ï¼ðŸ¥£",
        summary: "çªç„¶æ¢ç²®å®¹æ˜“å¼•èµ·çŒ«å’ªè½¯ä¾¿ï¼Œæ•™ä½ ç§‘å­¦çš„7æ—¥æ¢ç²®æ³•ã€‚",
        coverImage: "cloud://cloud1-9gy2up9ea2d61a0e.636c-cloud1-9gy2up9ea2d61a0e-1309873919/sample/cat-food-change.jpg"
    },
    {
        title: "å¦‚ä½•ç»™çŒ«å’ªå‰ªæŒ‡ç”²ä¸è¢«æŠ“ï¼Ÿ",
        category: "grooming",
        content: "å‰ªæŒ‡ç”²æ˜¯å¾ˆå¤šé“²å±Žå®˜çš„å™©æ¢¦ï¼Œè¯•è¯•è¿™äº›æŠ€å·§ï¼š\n\n1. **é€‰å¯¹æ—¶æ©Ÿ**ï¼šè¶çŒ«å’ªç¡è§‰æˆ–è¿·ç³Šçš„æ—¶å€™ä¸‹æ‰‹ã€‚\n2. **åŒ…è£¹å¤§æ³•**ï¼šç”¨æ¯›å·¾æŠŠçŒ«å’ªåŒ…èµ·æ¥ï¼Œåªéœ²å‡ºè¦å‰ªçš„çˆªå­ã€‚\n3. **åªå‰ªå°–ç«¯**ï¼šçœ‹å‡†ç²‰çº¢è‰²çš„è¡€çº¿ï¼ˆQuickï¼‰ï¼Œåªå‰ªé€æ˜Žçš„å°–ç«¯éƒ¨åˆ†ï¼Œå®çŸ­å‹¿é•¿ã€‚\n4. **å¥–åŠ±æœºåˆ¶**ï¼šå‰ªå®Œä¸€ä¸ªçˆªå­ç»™ç‚¹é›¶é£Ÿå¥–åŠ±ï¼Œè®©å®ƒå»ºç«‹ç¾Žå¥½è”æƒ³ã€‚\n\nå®žåœ¨ä¸è¡Œï¼Œåˆ†å¤šæ¬¡å‰ªï¼Œä¸è¦å¼ºæ±‚ä¸€æ¬¡æžå®šï¼âœ‚ï¸",
        summary: "è¶çŒ«å’ªç¡è§‰ä¸‹æ‰‹ï¼Œé…åˆæ¯›å·¾åŒ…è£¹æ³•ï¼Œæ–°æ‰‹ä¹Ÿèƒ½è½»æ¾æžå®šå‰ªæŒ‡ç”²ã€‚",
        coverImage: "cloud://cloud1-9gy2up9ea2d61a0e.636c-cloud1-9gy2up9ea2d61a0e-1309873919/sample/cat-nail.jpg"
    },
    {
        title: "å¹¼çŠ¬ç–«è‹—æŽ¥ç§æ—¶é—´è¡¨",
        category: "health",
        content: "ç–«è‹—æ˜¯ç‹—ç‹—å¥åº·çš„ä¿æŠ¤ä¼žï¼Œé€šå¸¸æŽ¥ç§æµç¨‹å¦‚ä¸‹ï¼š\n\n1. **é¦–é’ˆï¼ˆ45å¤©å·¦å³ï¼‰**ï¼šäºŒè”ç–«è‹—ï¼ˆé¢„é˜²çŠ¬ç˜Ÿã€ç»†å°ï¼‰ã€‚\n2. **ç¬¬äºŒé’ˆï¼ˆé—´éš”21å¤©ï¼‰**ï¼šå››è”/äº”è”ç–«è‹—ã€‚\n3. **ç¬¬ä¸‰é’ˆï¼ˆé—´éš”21å¤©ï¼‰**ï¼šå››è”/äº”è”ç–«è‹— + ç‹‚çŠ¬ç–«è‹—ï¼ˆæ»¡3ä¸ªæœˆï¼‰ã€‚\n\nâš ï¸ æ³¨æ„ï¼šç–«è‹—æœŸé—´ä¸è¦æ´—æ¾¡ï¼Œå‡å°‘å¤–å‡ºï¼Œé¿å…æŽ¥è§¦å…¶ä»–é™Œç”Ÿç‹—ç‹—ã€‚æˆå¹´åŽè¿™å°±éœ€è¦æ¯å¹´åŠ å¼ºå…ç–«ä¸€é’ˆè”è‹—å’Œä¸€é’ˆç‹‚çŠ¬ã€‚ðŸ’‰",
        summary: "å¹¼çŠ¬ä»€ä¹ˆæ—¶å€™æ‰“ç–«è‹—ï¼Ÿæ‰“å‡ é’ˆï¼Ÿä¸€ä»½è¯¦ç»†çš„æ—¶é—´è¡¨é€ç»™ä½ ã€‚",
        coverImage: "cloud://cloud1-9gy2up9ea2d61a0e.636c-cloud1-9gy2up9ea2d61a0e-1309873919/sample/dog-vaccine.jpg"
    },
    {
        title: "ç®€å•çš„åä¸‹ï¼ˆSitï¼‰è®­ç»ƒæ•™ç¨‹",
        category: "training",
        content: "æ•™ç‹—ç‹—â€œåä¸‹â€æ˜¯æœ€åŸºç¡€çš„è®­ç»ƒï¼š\n\n1. å‡†å¤‡å¥½å°é›¶é£Ÿï¼Œç«™åœ¨ç‹—ç‹—é¢å‰ã€‚\n2. æ‰‹æ‹¿é›¶é£Ÿï¼Œæ”¾åœ¨ç‹—ç‹—é¼»å°–ä¸Šæ–¹ã€‚\n3. æ…¢æ…¢å‘åŽç§»åŠ¨æ‰‹ï¼Œå¼•å¯¼ç‹—ç‹—æŠ¬å¤´ï¼Œå±è‚¡è‡ªç„¶ä¸‹æ²‰ã€‚\n4. å½“å±è‚¡ç€åœ°çž¬é—´ï¼Œç«‹åˆ»è¯´â€œåä¸‹â€ï¼Œå¹¶ç»™é›¶é£Ÿå¥–åŠ±ã€‚\n5. æ¯å¤©é‡å¤10-15æ¬¡ï¼Œå¾ˆå¿«å®ƒå°±èƒ½å­¦ä¼šï¼\n\nå…³é”®è¦æœ‰è€å¿ƒï¼Œä¸è¦æŒ‰åŽ‹ç‹—ç‹—çš„å±è‚¡å“¦ï¼ðŸŽ“",
        summary: "æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•ç”¨é›¶é£Ÿå¼•å¯¼ç‹—ç‹—å­¦ä¼š'åä¸‹'å£ä»¤ã€‚",
        coverImage: "cloud://cloud1-9gy2up9ea2d61a0e.636c-cloud1-9gy2up9ea2d61a0e-1309873919/sample/dog-sit.jpg"
    },
    {
        title: "ç‹—ç‹—æ‹‰ç¨€æ€Žä¹ˆåŠžï¼Ÿå®¶åº­åˆæ­¥åˆ¤æ–­",
        category: "health",
        content: "ç‹—ç‹—æ‹‰ç¨€ä¸è¦æ…Œï¼Œå…ˆè§‚å¯Ÿç²¾ç¥žçŠ¶æ€ï¼š\n\n- **ç²¾ç¥žå¥½ã€é£Ÿæ¬²å¥½**ï¼šå¯èƒ½æ˜¯åƒå¤šäº†ã€ç€å‡‰æˆ–æ¢ç²®ä¸å½“ã€‚å¯ä»¥ç¦é£Ÿ12-24å°æ—¶ï¼ˆä¸ç¦æ°´ï¼‰ï¼Œå–‚ç‚¹ç›Šç”ŸèŒè§‚å¯Ÿã€‚\n- **ç²¾ç¥žå·®ã€å‘•åã€ä¾¿è¡€**ï¼šå¯èƒ½æ˜¯ç»†å°ã€å† çŠ¶æˆ–å…¶ä»–ä¸¥é‡ç–¾ç—…ï¼Œ**ç«‹å³é€åŒ»**ï¼\n- **æœ‰è™«ä½“**ï¼šéœ€è¦é©±è™«ã€‚\n\næ— æ³•åˆ¤æ–­æ—¶ï¼Œå¸¦ä¸Šä¾¿ä¾¿æ ·æœ¬åŽ»åŒ»é™¢åŒ–éªŒæœ€æ”¾å¿ƒã€‚ðŸ¥",
        summary: "ç‹—ç‹—æ‹‰ç¨€æ˜¯ç¦é£Ÿè§‚å¯Ÿè¿˜æ˜¯ç«‹é©¬é€åŒ»ï¼Ÿæ•™ä½ é€šè¿‡ç²¾ç¥žçŠ¶æ€åˆæ­¥åˆ¤æ–­ã€‚",
        coverImage: "cloud://cloud1-9gy2up9ea2d61a0e.636c-cloud1-9gy2up9ea2d61a0e-1309873919/sample/dog-diarrhea.jpg"
    },
    {
        title: "çŒ«å’ªä¸ºä»€ä¹ˆå–œæ¬¢é’»ç®±å­ï¼Ÿ",
        category: "training",
        content: "è¿™ä¸æ˜¯è®­ç»ƒé—®é¢˜ï¼Œæ˜¯å¤©æ€§ï¼ðŸ“¦\n\n1. **å®‰å…¨æ„Ÿ**ï¼šå°é—­ç©ºé—´è®©æ•çŒŽè€…è§‰å¾—å®‰å…¨ï¼Œå¯ä»¥æš—ä¸­è§‚å¯Ÿã€‚\n2. **å–æš–**ï¼šçº¸ç®±æ˜¯ç»ä½³çš„éš”çƒ­ææ–™ï¼ŒçŒ«å’ªæœ€é€‚æ¸©åº¦æ˜¯30-36åº¦ï¼Œç®±å­é‡Œæš–å’Œã€‚\n3. **å‡åŽ‹**ï¼šç ”ç©¶è¡¨æ˜Žï¼Œæœ‰ç®±å­çš„æ”¶å®¹æ‰€çŒ«å’ªåŽ‹åŠ›æ°´å¹³æ›´ä½Žã€‚\n\næ‰€ä»¥ï¼Œç»™ä¸»å­ç•™ä¸ªå¿«é€’ç®±ï¼Œå°±æ˜¯æœ€å¥½çš„ç¤¼ç‰©ï¼",
        summary: "å®‰å…¨æ„Ÿï¼Ÿå–æš–ï¼Ÿæ­ç§˜çŒ«å’ªå¯¹çº¸ç®±æƒ…æœ‰ç‹¬é’Ÿçš„ç§˜å¯†ã€‚",
        coverImage: "cloud://cloud1-9gy2up9ea2d61a0e.636c-cloud1-9gy2up9ea2d61a0e-1309873919/sample/cat-box.jpg"
    }
]

exports.main = async (event, context) => {
    try {
        const promises = SAMPLE_DATA.map(item => {
            return db.collection('knowledge').add({
                data: {
                    ...item,
                    createTime: new Date(),
                    updateTime: new Date()
                }
            })
        })

        await Promise.all(promises)
        return { success: true, count: SAMPLE_DATA.length }
    } catch (err) {
        console.error(err)
        return { success: false, error: err }
    }
}
